# 📘 Gov Contract Platform - คู่มือการใช้งานฉบับสมบูรณ์

> **สำหรับ**: ผู้ดูแลระบบ, เจ้าหน้าที่จัดการสัญญา, และผู้ใช้งานทั่วไป  
> **เวอร์ชัน**: 2.0 | **อัปเดต**: กุมภาพันธ์ 2026

---

## 📑 สารบัญ

1. [เริ่มต้นใช้งาน](#-เริ่มต้นใช้งาน)
2. [การล็อกอินและความปลอดภัย](#-การล็อกอินและความปลอดภัย)
3. [หน้า Dashboard](#-หน้า-dashboard)
4. [การจัดการผู้รับจ้าง (Vendors)](#-การจัดการผู้รับจ้าง-vendors)
5. [การจัดการสัญญา](#-การจัดการสัญญา)
6. [Template สัญญาและ AI](#-template-สัญญาและ-ai)
7. [ระบบ AI และ Automation](#-ระบบ-ai-และ-automation)
8. [Knowledge Base และ RAG](#-knowledge-base-และ-rag)
9. [การแจ้งเตือน](#-การแจ้งเตือน)
10. [การตั้งค่าระบบ](#-การตั้งค่าระบบ)
11. [แก้ไขปัญหา](#-แก้ไขปัญหา)

---

## 🚀 เริ่มต้นใช้งาน

### ขั้นตอนแรก: เข้าสู่ระบบ

```
🌐 เปิดเบราว์เซอร์ → พิมพ์: http://localhost:3000
```

**ข้อมูลล็อกอินเริ่มต้น:**
| ช่อง | ค่า |
|-----|-----|
| ชื่อผู้ใช้ | `admin` |
| รหัสผ่าน | `admin123` |

> 💡 **ทิป**: หลังล็อกอินครั้งแรก ควรเปลี่ยนรหัสผ่านทันที!

---

## 🔐 การล็อกอินและความปลอดภัย

### 2FA (Two-Factor Authentication) คืออะไร?

**อธิบายง่ายๆ**: นอกจากรหัสผ่านแล้ว ต้องมีรหัสเพิ่มเติมจากโทรศัพท์มือถือ

**เหมือนกับ**: ธนาคารที่ส่ง OTP มาโทรศัพท์เวลาโอนเงิน

**วิธีตั้งค่า:**
```
1. ไปที่: ตั้งค่า → ความปลอดภัย
2. หัวข้อ: "การยืนยันตัวตนแบบสองขั้นตอน"
3. กด: "ตั้งค่า 2FA"
4. ดาวน์โหลดแอป: Google Authenticator หรือ Authy
5. สแกน QR Code ที่แสดงบนหน้าจอ
6. กรอกรหัส 6 ตัวจากโทรศัพท์ → กดยืนยัน
```

**⚠️ สำคัญ**: บันทึก "รหัสสำรอง" ไว้ในกรณีโทรศัพท์หาย!

---

## 📊 หน้า Dashboard

### หน้านี้แสดงอะไรบ้าง?

```
┌─────────────────────────────────────────────┐
│  📊 Dashboard - ภาพรวมระบบ                   │
├─────────────────────────────────────────────┤
│                                              │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐   │
│  │ สัญญา   │ │ ผู้รับจ้าง│ │ เอกสาร  │   │
│  │   156   │ │    89    │ │   234   │   │
│  └──────────┘ └──────────┘ └──────────┘   │
│                                              │
│  📈 กราฟ: มูลค่าสัญญารายเดือน               │
│                                              │
│  ⚠️ แจ้งเตือน:                              │
│     • สัญญาใกล้หมดอายุ (5 รายการ)          │
│     • งานล่าช้า (2 รายการ)                  │
│                                              │
└─────────────────────────────────────────────┘
```

**การใช้งาน:**
- **การ์ดตัวเลข**: คลิกเพื่อดูรายละเอียด
- **กราฟ**: แสดงแนวโน้ม 12 เดือน
- **แจ้งเตือน**: คลิกเพื่อไปหน้าจัดการ

---

## 👥 การจัดการผู้รับจ้าง (Vendors)

### ผู้รับจ้างคือใคร?

**คำอธิบาย**: บริษัทหรือบุคคลที่รับจ้างทำสัญญากับหน่วยงาน

**ตัวอย่าง**: 
- บริษัทก่อสร้างที่รับเหมาสร้างอาคาร
- บริษัท IT ที่รับจ้างพัฒนาระบบ
- บุคคลที่รับจ้างเป็นที่ปรึกษา

### ประเภทผู้รับจ้าง

| ประเภท | อธิบาย | ตัวอย่าง |
|--------|--------|---------|
| **นิติบุคคล** | บริษัท จำกัด | บริษัท ก่อสร้างไทย จำกัด |
| **บุคคลธรรมดา** | คนทั่วไป | นายสมชาย ใจดี |
| **ห้างหุ้นส่วน** | หจก. | หจก. ซ่อมรถกลาง |
| **สหกรณ์** | องค์กรสมาชิก | สหกรณ์ออมทรัพย์ |
| **รัฐวิสาหกิจ** | องค์กรรัฐ | การไฟฟ้าฝ่ายผลิต |
| **อื่นๆ** | ไม่เข้าข้างต้น | - |

### สถานะผู้รับจ้าง (เข้าใจง่าย)

```
🟢 พร้อมใช้งาน  → ใช้งานได้ตามปกติ
⚪ ไม่ใช้งาน    → หยุดชั่วคราว (แต่ข้อมูลยังอยู่)
🟡 รอตรวจสอบ   → สร้างใหม่ รอเจ้าหน้าที่ตรวจสอบ
🟠 ระงับชั่วคราว → มีปัญหาระหว่างตรวจสอบ
🔴 แบล็คลิสต์   → ห้ามทำสัญญา (ทำผิดร้ายแรง)
```

### Email Verification (ยืนยันอีเมล)

**ทำไมต้องยืนยัน?**
- ป้องกันการใส่อีเมลผิด
- ใช้ส่งเอกสารได้จริง
- แสดงความน่าเชื่อถือ

**วิธียืนยัน:**
```
1. ไปที่หน้า ผู้รับจ้าง → รายละเอียดผู้รับจ้าง
2. ดูที่ข้อมูลติดต่อ
3. ถ้าอีเมลมี ⚠️ แสดงว่ายังไม่ยืนยัน
4. กดปุ่ม "ยืนยันอีเมล"
5. ระบบจะเช็คว่าอีเมลใช้งานได้จริง
```

> 💡 **ทิป**: ถ้าผู้รับจ้างบอกว่าอีเมลถูกต้อง แต่ระบบไม่ยืนยัน ให้ตรวจสอบ Spam folder

### Bulk Actions (จัดการหลายรายการ)

**เมื่อไหร่ใช้?**: ต้องการเปลี่ยนสถานะหรือลบหลายคนพร้อมกัน

**วิธีใช้:**
```
1. ไปที่หน้า ผู้รับจ้าง
2. ติ๊ก ☑️ หน้าชื่อผู้รับจ้างที่ต้องการ
   (หรือติ๊กหัวตารางเพื่อเลือกทั้งหมด)
3. แถบปุ่มจะโผล่ขึ้นด้านบน:
   [เปิดใช้งาน] [ปิดใช้งาน] [ลบ]
4. กดปุ่มที่ต้องการ
5. ยืนยันการทำรายการ
```

**⚠️ ข้อควรระวัง**:
- ข้อมูลระบบ (มี Badge สีม่วง) ลบไม่ได้
- การลบเป็น Soft Delete (ยังกู้คืนได้จาก Backend)

---

## 📄 การจัดการสัญญา

### ขั้นตอนสร้างสัญญา

```
ขั้นตอนที่ 1: ข้อมูลพื้นฐาน
├─ ชื่อสัญญา: สัญญาจ้างก่อสร้างอาคารสำนักงาน
├─ เลขที่สัญญา: 64/2566
├─ ประเภท: ก่อสร้าง
└─ มูลค่า: 5,000,000 บาท

ขั้นตอนที่ 2: ผู้เกี่ยวข้อง
├─ ผู้ว่าจ้าง: สำนักงานปลัดกระทรวง
└─ ผู้รับจ้าง: บริษัท ก่อสร้างไทย จำกัด

ขั้นตอนที่ 3: ระยะเวลา
├─ วันเริ่มสัญญา: 01/01/2566
├─ วันสิ้นสุด: 31/12/2566
└─ ระยะเวลา: 365 วัน

ขั้นตอนที่ 4: เอกสาร
└─ อัปโหลด: แบบแปลน, TOR, ใบเสนอราคา
```

### สถานะสัญญา

```
[Draft] → [Pending Approval] → [Active] → [Completed]
  ↑           ↓                    ↓
  └──── [Rejected]              [Terminated]
```

| สถานะ | ความหมาย | ใครเปลี่ยนได้ |
|-------|----------|---------------|
| **Draft** | ร่างสัญญา | ผู้สร้าง |
| **Pending** | รออนุมัติ | ระบบ (ส่งให้อนุมัติ) |
| **Active** | กำลังใช้งาน | ผู้อนุมัติ |
| **Completed** | ส่งมอบแล้ว | ผู้ดูแล |
| **Terminated** | ยกเลิก | ผู้ดูแล |

---

## 📝 Template สัญญาและ AI

### Template คืออะไร?

**คำอธิบาย**: แม่แบบสัญญาที่ใช้ซ้ำได้ ไม่ต้องพิมพ์ใหม่ทุกครั้ง

**เหมือนกับ**: ฟอร์ม Word ที่มีช่องกรอกพร้อมแล้ว

### วิธีสร้าง Template ด้วย AI (สำคัญ!)

**สถานการณ์**: มีสัญญาเก่าเป็น PDF อยากทำเป็น Template ใหม่

**ขั้นตอน:**
```
1. ไปที่: ตั้งค่า → ตัวอย่างสัญญา
2. กด: "สร้าง Template ใหม่"
3. คลิก: "นำเข้าด้วย AI" (กล่องสีม่วง)
4. อัปโหลดไฟล์:
   ├─ ลากไฟล์มาวาง หรือ
   └─ คลิกเลือกไฟล์ (PDF, DOCX, รูปภาพ)
5. (Optional) ปรับแต่ง Prompt:
   ├─ กด "ตั้งค่า Prompt"
   └─ แก้ไขคำสั่งให้ AI (ถ้าต้องการ)
6. กด: "ถอดความด้วย AI"
7. รอประมาณ 10-30 วินาที
8. ระบบจะกรอกข้อมูลให้อัตโนมัติ:
   ├─ ชื่อ Template
   ├─ ประเภทสัญญา
   └─ ข้อกำหนดแยกเป็นข้อๆ
9. ตรวจสอบและแก้ไข (ถ้าจำเป็น)
10. กด: "บันทึก Template"
```

### System Prompt คืออะไร?

**คำอธิบาย**: คำสั่งที่บอก AI ว่าให้ถอดความอย่างไร

**ตัวอย่าง Default Prompt**:
```
"คุณเป็นระบบ AI สำหรับถอดความสัญญา...
จากเอกสารที่ให้มา:
1. แยกข้อกำหนดเป็นข้อๆ
2. ตั้งชื่อข้อให้เข้าใจง่าย
3. สรุปเนื้อหาแต่ละข้อ"
```

**เมื่อไหร่ต้องแก้ Prompt?**
- ต้องการให้เน้นข้อเฉพาะ (เช่น เน้นเรื่องการเงิน)
- เอกสารมีรูปแบบพิเศษ
- AI ถอดความไม่ตรงต้องการ

**วิธีแก้ Prompt:**
```
1. ไปที่: ตั้งค่า → ตัวอย่างสัญญา
2. เลื่อนลงมาที่: "ตั้งค่า AI Extraction Prompt"
3. แก้ไขข้อความในช่อง
4. กด "ทดสอบ Prompt" เพื่อลองก่อน
5. ถ้าพอใจ กด "บันทึก"
```

---

## 🤖 ระบบ AI และ Automation

### AI Provider คืออะไร?

**คำอธิบาย**: แหล่งที่มาของ AI ที่ระบบใช้คิด

**ตัวเลือกที่มี:**

| Provider | ใช้เมื่อ | ข้อดี | ข้อเสีย |
|----------|---------|--------|---------|
| **Ollama** | มีเซิร์ฟเวอร์เอง | ฟรี, ข้อมูลไม่ออกนอก | ต้องตั้งเซิร์ฟเวอร์ |
| **OpenAI** | ต้องการความแม่นยำสูง | แม่นยำ, เร็ว | มีค่าใช้จ่าย |
| **Typhoon** | ใช้ภาษาไทย | เข้าใจภาษาไทยดี | ต้องมี API Key |

### วิธีเพิ่ม AI Provider

```
1. ไปที่: ตั้งค่า → ตั้งค่า AI Models
2. เลือกแท็บ: "Embedding Models" หรือ "LLM Models"
3. กด: "เพิ่ม Provider ใหม่"
4. กรอกข้อมูล:
   ├─ ชื่อ: Ollama Local
   ├─ ประเภท: Ollama
   ├─ URL: http://localhost:11434
   ├─ API Key: (ถ้ามี)
   └─ โมเดล: llama3.1
5. กด: "ทดสอบการเชื่อมต่อ"
6. ถ้าขึ้น "เชื่อมต่อสำเร็จ" → กด "บันทึก"
```

---

## 📚 Knowledge Base และ RAG

### Knowledge Base คืออะไร?

**คำอธิบาย**: คลังความรู้ที่ AI อ่านแล้วตอบคำถามได้

**เหมือนกับ**: ห้องสมุดที่ AI เป็นเจ้าหน้าที่

**ใช้ทำอะไร?**
- ถาม AI เกี่ยวกับระเบียบจัดซื้อจัดจ้าง
- ค้นหาข้อมูลจากเอกสารเก่า
- ตรวจสอบว่าสัญญาถูกต้องไหม

### RAG คืออะไร?

**ย่อมาจาก**: Retrieval-Augmented Generation

**คำอธิบายง่ายๆ**: AI อ่านเอกสารก่อน แล้วค่อยตอบ

**เหมือนกับ**: นักเรียนเปิดหนังสือตอบข้อสอบ

### ตั้งค่า RAG (สำคัญ!)

#### 1. Embedding Model
**คืออะไร?**: โมเดลที่แปลงข้อความเป็นตัวเลข (เพื่อให้คอมพิวเตอร์เข้าใจ)

**เลือกอย่างไร?**
```
ถ้าใช้ Ollama Local → เลือก: nomic-embed-text
ถ้าใช้ OpenAI → เลือก: text-embedding-3-small
ถ้าเอกสารภาษาไทย → เลือกโมเดลที่รองรับภาษาไทย
```

#### 2. Chunk Size (ขนาดชิ้น)
**คืออะไร?**: แบ่งเอกสารเป็นชิ้นๆ ชิ้นละกี่ตัวอักษร

**เลือกอย่างไร?**

| ขนาด | เหมาะกับ | ผลลัพธ์ |
|------|----------|---------|
| **256** | เอกสารสั้น 1-2 หน้า | ตอบเร็ว แต่อาจไม่ครบ |
| **512** | เอกสารทั่วไป | สมดุล (แนะนำ) |
| **1024** | เอกสารยาว | ตอบละเอียด แต่ช้า |
| **2048** | เอกสารซับซ้อนมาก | ละเอียดที่สุด |

**ตัวอย่าง**: 
- ระเบียบ 10 หน้า → เลือก 512
- คู่มือ 100 หน้า → เลือก 1024

#### 3. Chunk Overlap (ทับซ้อน)
**คืออะไร?**: ให้ชิ้นที่ 1 และชิ้นที่ 2 มีข้อความซ้ำกันกี่ตัวอักษร

**ทำไมต้องทับซ้อน?**: ป้องกันข้อมูลขาดตอนตรงรอยต่อ

**เลือกอย่างไร?**
- **0**: เร็วที่สุด แต่อาจขาดข้อมูล
- **50**: ค่าเริ่มต้น สมดุล (แนะนำ)
- **200**: ละเอียดที่สุด แต่ใช้พื้นที่มาก

**วิธีตั้งค่า:**
```
1. ไปที่: ตั้งค่า → Knowledge Base
2. เลื่อนลงมาที่: "การตั้งค่า RAG"
3. เลือก:
   ├─ Embedding Model: (เลือกจากรายการ)
   ├─ Chunk Size: 512
   └─ Chunk Overlap: 50
4. กด: "บันทึกการตั้งค่า"
```

---

## 🔔 การแจ้งเตือน

### ระดับการแจ้งเตือน

```
┌─────────────────────────────────────────┐
│ ระดับที่ 1: Global (ทั้งระบบ)           │
│ ├─ ตั้งค่า SMTP (เซิร์ฟเวอร์อีเมล)      │
│ ├─ ตั้งค่า Template อีเมล              │
│ └─ ตั้งค่า Default                     │
├─────────────────────────────────────────┤
│ ระดับที่ 2: Per-User (รายบุคคล)         │
│ ├─ แต่ละคนเลือกรับอะไร                 │
│ ├─ ช่องทางที่ต้องการ (อีเมล/In-app)     │
│ └─ ความถี่ (ทันที/รายวัน/รายสัปดาห์)   │
└─────────────────────────────────────────┘
```

### วิธีตั้งค่าแจ้งเตือน

**สำหรับผู้ดูแลระบบ (Global):**
```
1. ไปที่: ตั้งค่า → การแจ้งเตือน
2. แท็บ: "ตั้งค่าทั่วไป"
3. ตั้งค่า:
   ├─ SMTP Server: smtp.gmail.com
   ├─ SMTP Port: 587
   ├─ Username: your-email@gmail.com
   └─ Password: your-app-password
4. กด: "ทดสอบการส่งอีเมล"
5. ถ้าสำเร็จ → กด "บันทึก"
```

**สำหรับผู้ใช้ทั่วไป:**
```
1. ไปที่: ตั้งค่า → การแจ้งเตือน
2. แท็บ: "การแจ้งเตือนของฉัน"
3. เลือกว่าจะรับอะไรบ้าง:
   ☑️ สัญญาใกล้หมดอายุ
   ☑️ งานล่าช้า
   ☐ เอกสารใหม่ (ไม่เลือก)
4. เลือกช่องทาง:
   ☑️ อีเมล
   ☑️ แจ้งเตือนบนหน้าเว็บ
5. กด: "บันทึกการตั้งค่า"
```

---

## ⚙️ การตั้งค่าระบบ

### OCR Settings (ถอดความเอกสาร)

**OCR คืออะไร?**: แปลงรูปภาพตัวอักษรเป็นข้อความที่คอมพิวเตอร์อ่านได้

**ใช้เมื่อไหร่?**: อัปโหลดเอกสารสแกน (PDF รูปภาพ)

**ตัวเลือก:**
- **Tesseract**: ฟรี ใช้ในเครื่อง
- **Typhoon AI**: แม่นยำกว่า แต่ต้องมี API Key
- **Custom API**: ใช้ API ขององค์กรเอง

### AI Features (ฟีเจอร์ AI)

**Auto Extract**: ถอดความเอกสารอัตโนมัติเมื่ออัปโหลด  
**Smart Classification**: จัดหมวดหมู่เอกสารอัตโนมัติ  
**Anomaly Detection**: ตรวจจับความผิดปกติในสัญญา  
**Contract Analysis**: วิเคราะห์สัญญาว่ามีความเสี่ยงอะไร

---

## 🔧 แก้ไขปัญหา

### ปัญหาที่พบบ่อย

#### 1. ล็อกอินไม่ได้ / หมุนค้าง

**สาเหตุ**: Backend ไม่ตอบสนอง

**แก้ไข:**
```bash
# Restart backend
cd gov-contract-platform/infra
docker compose restart backend

# รอ 10 วินาที แล้วลองใหม่
```

#### 2. AI ไม่ตอบ / ถอดความไม่ได้

**สาเหตุ**: AI Provider ไม่ทำงาน

**แก้ไข:**
```
1. ไปที่: ตั้งค่า → ตั้งค่า AI Models
2. ดูที่ Provider ที่ใช้งาน
3. กดปุ่ม "ทดสอบ" ถ้าขึ้นแดง = ผิด
4. ตรวจสอบ:
   ├─ URL ถูกต้องไหม
   ├─ API Key หมดอายุไหม
   └─ เซิร์ฟเวอร์ AI เปิดอยู่ไหม
```

#### 3. อีเมลไม่ส่ง

**สาเหตุ**: SMTP ตั้งค่าผิด

**แก้ไข:**
```
1. ตรวจสอบ SMTP Server ถูกต้องไหม
2. ใช้ App Password (ไม่ใช่รหัสผ่านปกติ) สำหรับ Gmail
3. เปิด Less Secure Apps (ถ้าใช้บัญชีเก่า)
4. ทดสอบการส่งก่อนบันทึก
```

#### 4. อัปโหลดไฟล์ไม่ได้

**สาเหตุ**: MinIO หรือ Network มีปัญหา

**แก้ไข:**
```bash
# ตรวจสอบ MinIO
docker compose ps minio

# ถ้าไม่ Running
docker compose restart minio
```

### ตรวจสอบสถานะระบบ

```bash
# ดูทุก Service
docker compose ps

# ดู Logs
docker compose logs -f backend
docker compose logs -f frontend

# Health Check
curl http://localhost:8000/health
curl http://localhost:3000
```

---

## 💡 Best Practices (แนวทางปฏิบัติที่ดี)

### สำหรับผู้ดูแลระบบ

1. **สำรองข้อมูล**: ตั้ง cron job สำรอง Database ทุกวัน
2. **Monitor Logs**: ตรวจสอบ Logs อย่างน้อยสัปดาห์ละครั้ง
3. **Update Regularly**: อัปเดตระบบเมื่อมีเวอร์ชันใหม่
4. **Test AI Providers**: ทดสอบ AI ก่อนใช้งานจริง

### สำหรับผู้ใช้งาน

1. **ตรวจสอบข้อมูล**: ตรวจสอบข้อมูล AI ที่ถอดความก่อนบันทึก
2. **ใช้ Template**: สร้าง Template เพื่อประหยัดเวลา
3. **อัปเดตสถานะ**: อัปเดตสถานะสัญญาอย่างสม่ำเสมอ
4. **Verify Email**: ยืนยันอีเมลผู้รับจ้างเพื่อความถูกต้อง

---

## 📞 ติดต่อสนับสนุน

**GitHub Issues**: https://github.com/n00n0i/gov-contract-platform/issues

**ตรวจสอบ Logs**:
```bash
cd gov-contract-platform/infra
docker compose logs -f --tail 100
```

---

**Version**: 2.0  
**Last Updated**: กุมภาพันธ์ 2026  
**Author**: n00n0i

> 🎉 **ขอให้ใช้งานอย่างมีความสุข!** หากมีคำถามเพิ่มเติม สามารถเปิด Issue ใน GitHub ได้เลย
